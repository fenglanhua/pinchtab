version: '3.8'

services:
  pinchtab:
    build: .
    container_name: pinchtab
    ports:
      - "9867:9867"
    volumes:
      - pinchtab-data:/data
    environment:
      - BRIDGE_PORT=9867
      - BRIDGE_HEADLESS=true
      - BRIDGE_TOKEN=${PINCHTAB_TOKEN:-}
    restart: unless-stopped
    # Required for Chrome to work in container
    security_opt:
      - seccomp:unconfined
    # Limit resources
    mem_limit: 2g
    cpus: '2.0'

volumes:
  pinchtab-data: